docker ps コンテナの情報を見る

docker start lamp
lanpスタートする

docker exec -it lamp /bin/bash
コンテナに移動する 上記ではlamp

centos アップデート
docker start lamp

apt-get install -y vim
vim ダウンロード

apache2ctl start
apache起動

MYSQL 使い方

mysql接続
コンテナ入る
docker exec -it lamp /bin/bash

mysql -u morita -p
もしくは
mysql -u root -p


sql リストア
mysql -u root  -D データベース名 < worldcup2014.dmp

テーブル作る
CREATE DATABASE テーブル名;


テーブル選択する

use table名;


テーブル見る

show tables;

縦表示
show table status￥G

pager less -n -i -S
折り返ししない

カラムを見る

SHOW COLUMNS FROM tbl_name


mysql 日本語対応させる

実行
apt-get install language-pack-ja-base language-pack-ja
実行

apt-get install -y locales
locale-gen ja-JP.UTF-8
localedef -f UTF-8 -i ja_JP ja_JP

ls -la
隠しファイル見る
/home/bashsrcファイル(隠しファイル)に

export LANG=ja_JP.UTF-8
export LANGUAGE=ja_JP:jp
export LC_ALL=ja_JP.UTF-8`
書き込む



テーブル作成

CREATE TABLE IF NOT EXISTS postal_code (
  postal_id int(11) NOT NULL AUTO_INCREMENT,
  jis_code varchar(8) NOT NULL,
  postal5 varchar(8) NOT NULL,
  postal7 varchar(8) NOT NULL,
  pref_kana varchar(32) NOT NULL,
  city_kana varchar(64) NOT NULL,
  address_kana varchar(128) NOT NULL,
  pref varchar(8) NOT NULL,
  city varchar(32) NOT NULL,
  address varchar(64) NOT NULL,
  flag1 varchar(8) NOT NULL,
  flag2 varchar(8) NOT NULL,
  flag3 varchar(8) NOT NULL,
  flag4 varchar(8) NOT NULL,
  flag5 varchar(8) NOT NULL,
  flag6 varchar(8) NOT NULL,
  PRIMARY KEY (postal_id),
  KEY IX_postal_code_1 (pref,city,address,postal7,jis_code)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;


CREATE TABLE IF NOT EXISTS postal_code_base (
  jis_code varchar(8) NOT NULL,
  postal5 varchar(8) NOT NULL,
  postal7 varchar(8) NOT NULL,
  pref_kana varchar(32) NOT NULL,
  city_kana varchar(64) NOT NULL,
  address_kana varchar(128) NOT NULL,
  pref varchar(8) NOT NULL,
  city varchar(32) NOT NULL,
  address varchar(64) NOT NULL,
  flag1 varchar(8) NOT NULL,
  flag2 varchar(8) NOT NULL,
  flag3 varchar(8) NOT NULL,
  flag4 varchar(8) NOT NULL,
  flag5 varchar(8) NOT NULL,
  flag6 varchar(8) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;



CREATE TABLE post.tbl_name
  (col_name1 data_type1, col_name2 data_type2, ...);


mysql my.conf設定
/etc/mysql/配下

[mysqld]
character -set-server=utf8
secure-file-priv = ""

[client]
default-character-set=utf8
loose-local-infile=1


csv取り込み
マウントしたcsvファイル直下に移動して
mysql -u root -p mysqlに接続

LOAD DATA LOCAL INFILE 'KEN_ALL.CSV' INTO TABLE postal_code_base FIELDS TERMINATED BY ',' ENCLOSED BY '"';

DBの中のディレクトリの中に入っている場合

LOAD DATA  INFILE 'KEN_ALL.CSV' INTO TABLE postal_code_base FIELDS TERMINATED BY ',' ENCLOSED BY '"';

入ったデータをもとに
違うテーブルにインサートする。

INSERT INTO postal_code(jis_code, postal5, postal7, pref_kana, city_kana, address_kana, pref, city, address, flag1, flag2, flag3, flag4, flag5, flag6) SELECT * FROM postal_code_base;


ファイル検索
find / -name "*.conf"

cd ~/ホームディレクトリ移動


テーブル中身削除

TRUNCATE TABLE postal_code;


postgres起動

psql -U postgres で起動
