
NO1
mysql> explain SELECT group_name AS グループ, MIN(ranking) AS ランキング最上位, MAX(ranking) AS ランキング最下位
    -> FROM countries
    -> GROUP BY group_name;
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                           |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
|  1 | SIMPLE      | countries | NULL       | ALL  | NULL          | NULL | NULL    | NULL |   32 |   100.00 | Using temporary; Using filesort |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
1 row in set, 1 warning (0.00 sec)

NO2

SELECT AVG(height) AS 平均身長, AVG(weight) AS 平均体重
FROM players
WHERE position = 'GK'

NO3

mysql> explain SELECT c.name AS 国名, AVG(p.height) AS 平均身長
    -> FROM countries c
    -> JOIN players p ON p.country_id = c.id
    -> GROUP BY c.id, c.name
    -> ORDER BY AVG(p.height) DESC;
+----+-------------+-------+------------+--------+---------------+---------+---------+-----------------+------+----------+----------------------------------------------+
| id | select_type | table | partitions | type   | possible_keys | key     | key_len | ref             | rows | filtered | Extra                                        |
+----+-------------+-------+------------+--------+---------------+---------+---------+-----------------+------+----------+----------------------------------------------+
|  1 | SIMPLE      | p     | NULL       | ALL    | NULL          | NULL    | NULL    | NULL            |  736 |   100.00 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | c     | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.p.country_id |    1 |   100.00 | NULL                                         |
+----+-------------+-------+------------+--------+---------------+---------+---------+-----------------+------+----------+----------------------------------------------+
2 rows in set, 1 warning (0.00 sec)

NO4

mysql> explain SELECT kickoff AS キックオフ日時, c1.name AS 国名1, c2.name AS 国名2
    -> FROM pairings p
    -> LEFT JOIN countries c1 ON p.my_country_id = c1.id
    -> LEFT JOIN countries c2 ON p.enemy_country_id = c2.id
    -> ORDER BY kickoff;
+----+-------------+-------+------------+--------+---------------+---------+---------+-----------------------+------+----------+----------------+
| id | select_type | table | partitions | type   | possible_keys | key     | key_len | ref                   | rows | filtered | Extra          |
+----+-------------+-------+------------+--------+---------------+---------+---------+-----------------------+------+----------+----------------+
|  1 | SIMPLE      | p     | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                  |  144 |   100.00 | Using filesort |
|  1 | SIMPLE      | c1    | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.p.my_country_id    |    1 |   100.00 | NULL           |
|  1 | SIMPLE      | c2    | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.p.enemy_country_id |    1 |   100.00 | NULL           |
+----+-------------+-------+------------+--------+---------------+---------+---------+-----------------------+------+----------+----------------+
3 rows in set, 1 warning (0.00 sec)

NO5

mysql> explain SELECT p.name AS 名前, p.position AS ポジション, p.club AS 所属クラブ,
    ->     (SELECT COUNT(id) FROM goals g WHERE g.player_id = p.id) AS ゴール数
    -> FROM players p
    -> ORDER BY ゴール数 DESC;
+----+--------------------+-------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
| id | select_type        | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                           |
+----+--------------------+-------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
|  1 | PRIMARY            | p     | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using temporary; Using filesort |
|  2 | DEPENDENT SUBQUERY | g     | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  188 |    10.00 | Using where                     |
+----+--------------------+-------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
2 rows in set, 2 warnings (0.01 sec)

NO6


mysql> explain SELECT p.name AS 名前, p.position AS ポジション, p.club AS 所属クラブ,
    ->     (SELECT COUNT(id) FROM goals g WHERE g.player_id = p.id) AS ゴール数
    -> FROM players p
    -> ORDER BY ゴール数 DESC;
+----+--------------------+-------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
| id | select_type        | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                           |
+----+--------------------+-------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
|  1 | PRIMARY            | p     | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using temporary; Using filesort |
|  2 | DEPENDENT SUBQUERY | g     | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  188 |    10.00 | Using where                     |
+----+--------------------+-------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
2 rows in set, 2 warnings (0.00 sec)

NO7

mysql> explain SELECT p.name AS 名前, p.position AS ポジション, p.club AS 所属クラブ,
    ->     COUNT(g.id) AS ゴール数
    -> FROM players p
    -> LEFT JOIN goals g ON g.player_id = p.id
    -> GROUP BY p.id, p.name, p.position, p.club
    -> ORDER BY ゴール数 DESC;
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                                              |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+
|  1 | SIMPLE      | p     | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using temporary; Using filesort                    |
|  1 | SIMPLE      | g     | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  188 |   100.00 | Using where; Using join buffer (Block Nested Loop) |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+
2 rows in set, 1 warning (0.01 sec)


NO8

mysql> explain SELECT p.position AS ポジション, COUNT(g.id) AS ゴール数
    -> FROM players p
    -> LEFT JOIN goals g ON g.player_id = p.id
    -> GROUP BY p.position
    -> ORDER BY ゴール数 DESC;
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                                              |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+
|  1 | SIMPLE      | p     | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using temporary; Using filesort                    |
|  1 | SIMPLE      | g     | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  188 |   100.00 | Using where; Using join buffer (Block Nested Loop) |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+
2 rows in set, 1 warning (0.00 sec)

NO9

mysql> explain SELECT birth, TIMESTAMPDIFF(YEAR, birth, '2014-06-13') AS age, name, position
    -> FROM players
    -> ORDER BY age DESC;
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+----------------+
| id | select_type | table   | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra          |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+----------------+
|  1 | SIMPLE      | players | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using filesort |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+----------------+
1 row in set, 1 warning (0.00 sec)

NO10

mysql> explain SELECT c.group_name, COUNT(g.id)
    -> FROM goals g
    -> LEFT JOIN pairings p ON p.id = g.pairing_id
    -> LEFT JOIN countries c ON p.my_country_id = c.id
    -> WHERE p.kickoff BETWEEN '2014-06-13 0:00:00' AND '2014-06-27 23:59:59'
    -> GROUP BY c.group_name;
+----+-------------+-------+------------+--------+---------------+---------+---------+--------------------+------+----------+---------------------------------+
| id | select_type | table | partitions | type   | possible_keys | key     | key_len | ref                | rows | filtered | Extra                           |
+----+-------------+-------+------------+--------+---------------+---------+---------+--------------------+------+----------+---------------------------------+
|  1 | SIMPLE      | g     | NULL       | ALL    | NULL          | NULL    | NULL    | NULL               |  188 |   100.00 | Using temporary; Using filesort |
|  1 | SIMPLE      | p     | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.g.pairing_id    |    1 |    11.11 | Using where                     |
|  1 | SIMPLE      | c     | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.p.my_country_id |    1 |   100.00 | NULL                            |
+----+-------------+-------+------------+--------+---------------+---------+---------+--------------------+------+----------+---------------------------------+
3 rows in set, 1 warning (0.00 sec)

NO11

mysql> explain SELECT c.group_name, COUNT(g.id)
    -> FROM goals g
    -> LEFT JOIN pairings p ON p.id = g.pairing_id
    -> LEFT JOIN countries c ON p.my_country_id = c.id
    -> WHERE p.kickoff BETWEEN '2014-06-13 0:00:00' AND '2014-06-27 23:59:59'
    -> GROUP BY c.group_name;
+----+-------------+-------+------------+--------+---------------+---------+---------+--------------------+------+----------+---------------------------------+
| id | select_type | table | partitions | type   | possible_keys | key     | key_len | ref                | rows | filtered | Extra                           |
+----+-------------+-------+------------+--------+---------------+---------+---------+--------------------+------+----------+---------------------------------+
|  1 | SIMPLE      | g     | NULL       | ALL    | NULL          | NULL    | NULL    | NULL               |  188 |   100.00 | Using temporary; Using filesort |
|  1 | SIMPLE      | p     | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.g.pairing_id    |    1 |    11.11 | Using where                     |
|  1 | SIMPLE      | c     | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.p.my_country_id |    1 |   100.00 | NULL                            |
+----+-------------+-------+------------+--------+---------------+---------+---------+--------------------+------+----------+---------------------------------+
3 rows in set, 1 warning (0.00 sec)

NO12

mysql> explain SELECT goal_time
    -> FROM goals
    -> WHERE pairing_id = 103;
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | goals | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  188 |    10.00 | Using where |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+
1 row in set, 1 warning (0.00 sec)

NO13

mysql> explain SELECT c.name, COUNT(g.goal_time)
    -> FROM goals g
    -> LEFT JOIN pairings p ON p.id = g.pairing_id
    -> LEFT JOIN countries c ON p.my_country_id = c.id
    -> WHERE p.id = 103 OR p.id = 39
    -> GROUP BY c.name;
+----+-------------+-------+------------+--------+---------------+---------+---------+--------------------+------+----------+----------------------------------------------------+
| id | select_type | table | partitions | type   | possible_keys | key     | key_len | ref                | rows | filtered | Extra                                              |
+----+-------------+-------+------------+--------+---------------+---------+---------+--------------------+------+----------+----------------------------------------------------+
|  1 | SIMPLE      | p     | NULL       | range  | PRIMARY       | PRIMARY | 4       | NULL               |    2 |   100.00 | Using where; Using temporary; Using filesort       |
|  1 | SIMPLE      | c     | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.p.my_country_id |    1 |   100.00 | NULL                                               |
|  1 | SIMPLE      | g     | NULL       | ALL    | NULL          | NULL    | NULL    | NULL               |  188 |     1.90 | Using where; Using join buffer (Block Nested Loop) |
+----+-------------+-------+------------+--------+---------------+---------+---------+--------------------+------+----------+----------------------------------------------------+
3 rows in set, 1 warning (0.00 sec)

NO14

mysql> explain SELECT p1.kickoff, c1.name AS my_country, c2.name AS enemy_country,
    ->     c1.ranking AS my_ranking, c2.ranking AS enemy_ranking,
    ->     COUNT(g1.id) AS my_goals
    -> FROM pairings p1
    -> LEFT JOIN countries c1 ON c1.id = p1.my_country_id
    -> LEFT JOIN countries c2 ON c2.id = p1.enemy_country_id
    -> LEFT JOIN goals g1 ON p1.id = g1.pairing_id
    -> WHERE c1.group_name = 'C' AND c2.group_name = 'C'
    -> GROUP BY p1.kickoff, c1.name, c2.name, c1.ranking, c2.ranking
    -> ORDER BY p1.kickoff, c1.ranking;
+----+-------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
| id | select_type | table | partitions | type   | possible_keys | key     | key_len | ref                    | rows | filtered | Extra                                              |
+----+-------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
|  1 | SIMPLE      | c1    | NULL       | ALL    | PRIMARY       | NULL    | NULL    | NULL                   |   32 |    10.00 | Using where; Using temporary; Using filesort       |
|  1 | SIMPLE      | p1    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  144 |    10.00 | Using where; Using join buffer (Block Nested Loop) |
|  1 | SIMPLE      | c2    | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.p1.enemy_country_id |    1 |    10.00 | Using where                                        |
|  1 | SIMPLE      | g1    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  188 |   100.00 | Using where; Using join buffer (Block Nested Loop) |
+----+-------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
4 rows in set, 1 warning (0.01 sec)

NO15

mysql> explain SELECT p1.kickoff, c1.name AS my_country, c2.name AS enemy_country,
    ->     c1.ranking AS my_ranking, c2.ranking AS enemy_ranking,
    ->     (SELECT COUNT(g1.id) FROM goals g1 WHERE p1.id = g1.pairing_id) AS my_goals
    -> FROM pairings p1
    -> LEFT JOIN countries c1 ON c1.id = p1.my_country_id
    -> LEFT JOIN countries c2 ON c2.id = p1.enemy_country_id
    -> WHERE c1.group_name = 'C' AND c2.group_name = 'C'
    -> ORDER BY p1.kickoff, c1.ranking;
+----+--------------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
| id | select_type        | table | partitions | type   | possible_keys | key     | key_len | ref                    | rows | filtered | Extra                                              |
+----+--------------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
|  1 | PRIMARY            | c1    | NULL       | ALL    | PRIMARY       | NULL    | NULL    | NULL                   |   32 |    10.00 | Using where; Using temporary; Using filesort       |
|  1 | PRIMARY            | p1    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  144 |    10.00 | Using where; Using join buffer (Block Nested Loop) |
|  1 | PRIMARY            | c2    | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.p1.enemy_country_id |    1 |    10.00 | Using where                                        |
|  2 | DEPENDENT SUBQUERY | g1    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  188 |    10.00 | Using where                                        |
+----+--------------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
4 rows in set, 2 warnings (0.00 sec)

NO16

mysql> explain SELECT p1.kickoff, c1.name AS my_country, c2.name AS enemy_country,
    ->     c1.ranking AS my_ranking, c2.ranking AS enemy_ranking,
    ->     (SELECT COUNT(g1.id) FROM goals g1 WHERE p1.id = g1.pairing_id) AS my_goals,
    ->     (
    ->         SELECT COUNT(g2.id)
    ->         FROM goals g2
    ->         LEFT JOIN pairings p2 ON p2.id = g2.pairing_id
    ->         WHERE p2.my_country_id = p1.enemy_country_id AND p2.enemy_country_id = p1.my_country_id
    ->     ) AS enemy_goals
    -> FROM pairings p1
    -> LEFT JOIN countries c1 ON c1.id = p1.my_country_id
    -> LEFT JOIN countries c2 ON c2.id = p1.enemy_country_id
    -> WHERE c1.group_name = 'C' AND c2.group_name = 'C'
    -> ORDER BY p1.kickoff, c1.ranking;
+----+--------------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
| id | select_type        | table | partitions | type   | possible_keys | key     | key_len | ref                    | rows | filtered | Extra                                              |
+----+--------------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
|  1 | PRIMARY            | c1    | NULL       | ALL    | PRIMARY       | NULL    | NULL    | NULL                   |   32 |    10.00 | Using where; Using temporary; Using filesort       |
|  1 | PRIMARY            | p1    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  144 |    10.00 | Using where; Using join buffer (Block Nested Loop) |
|  1 | PRIMARY            | c2    | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.p1.enemy_country_id |    1 |    10.00 | Using where                                        |
|  3 | DEPENDENT SUBQUERY | p2    | NULL       | ALL    | PRIMARY       | NULL    | NULL    | NULL                   |  144 |     1.00 | Using where                                        |
|  3 | DEPENDENT SUBQUERY | g2    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  188 |    10.00 | Using where; Using join buffer (Block Nested Loop) |
|  2 | DEPENDENT SUBQUERY | g1    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  188 |    10.00 | Using where                                        |
+----+--------------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
6 rows in set, 4 warnings (0.01 sec)

NO17

mysql> explain SELECT p1.kickoff, c1.name AS my_country, c2.name AS enemy_country,
    ->     c1.ranking AS my_ranking, c2.ranking AS enemy_ranking,
    ->     (SELECT COUNT(g1.id) FROM goals g1 WHERE p1.id = g1.pairing_id) AS my_goals,
    ->     (
    ->         SELECT COUNT(g2.id)
    ->         FROM goals g2
    ->         LEFT JOIN pairings p2 ON p2.id = g2.pairing_id
    ->         WHERE p2.my_country_id = p1.enemy_country_id AND p2.enemy_country_id = p1.my_country_id
    ->     ) AS enemy_goals,
    ->     -- 追加ここから
    ->     (SELECT COUNT(g1.id) FROM goals g1 WHERE p1.id = g1.pairing_id) - (
    ->         SELECT COUNT(g2.id)
    ->         FROM goals g2
    ->         LEFT JOIN pairings p2 ON p2.id = g2.pairing_id
    ->         WHERE p2.my_country_id = p1.enemy_country_id AND p2.enemy_country_id = p1.my_country_id
    ->     ) AS goal_diff
    ->     -- 追加ここまで
    -> FROM pairings p1
    -> LEFT JOIN countries c1 ON c1.id = p1.my_country_id
    -> LEFT JOIN countries c2 ON c2.id = p1.enemy_country_id
    -> WHERE c1.group_name = 'C' AND c2.group_name = 'C'
    -> ORDER BY p1.kickoff, c1.ranking;
+----+--------------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
| id | select_type        | table | partitions | type   | possible_keys | key     | key_len | ref                    | rows | filtered | Extra                                              |
+----+--------------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
|  1 | PRIMARY            | c1    | NULL       | ALL    | PRIMARY       | NULL    | NULL    | NULL                   |   32 |    10.00 | Using where; Using temporary; Using filesort       |
|  1 | PRIMARY            | p1    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  144 |    10.00 | Using where; Using join buffer (Block Nested Loop) |
|  1 | PRIMARY            | c2    | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | wc.p1.enemy_country_id |    1 |    10.00 | Using where                                        |
|  5 | DEPENDENT SUBQUERY | p2    | NULL       | ALL    | PRIMARY       | NULL    | NULL    | NULL                   |  144 |     1.00 | Using where                                        |
|  5 | DEPENDENT SUBQUERY | g2    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  188 |    10.00 | Using where; Using join buffer (Block Nested Loop) |
|  4 | DEPENDENT SUBQUERY | g1    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  188 |    10.00 | Using where                                        |
|  3 | DEPENDENT SUBQUERY | p2    | NULL       | ALL    | PRIMARY       | NULL    | NULL    | NULL                   |  144 |     1.00 | Using where                                        |
|  3 | DEPENDENT SUBQUERY | g2    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  188 |    10.00 | Using where; Using join buffer (Block Nested Loop) |
|  2 | DEPENDENT SUBQUERY | g1    | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                   |  188 |    10.00 | Using where                                        |
+----+--------------------+-------+------------+--------+---------------+---------+---------+------------------------+------+----------+----------------------------------------------------+
9 rows in set, 7 warnings (0.00 sec)

NO18

SELECT p.kickoff, ADDTIME(p.kickoff, '-12:00:00') AS kickoff_jp
FROM pairings p
WHERE p.my_country_id = 1 AND p.enemy_country_id = 4;

NO19

mysql> explain SELECT TIMESTAMPDIFF(YEAR, birth, '2014-06-13') AS age, COUNT(id) AS player_count
    -> FROM players
    -> GROUP BY age;
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
| id | select_type | table   | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                           |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
|  1 | SIMPLE      | players | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using temporary; Using filesort |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
1 row in set, 1 warning (0.00 sec)

NO20

mysql> explain SELECT FLOOR(TIMESTAMPDIFF(YEAR, birth, '2014-06-13') / 5) * 5   AS age, COUNT(id) AS player_count
    -> FROM players
    -> GROUP BY age;
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
| id | select_type | table   | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                           |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
|  1 | SIMPLE      | players | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using temporary; Using filesort |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
1 row in set, 1 warning (0.00 sec)

NO21

mysql> explain SELECT FLOOR(TIMESTAMPDIFF(YEAR, birth, '2014-06-13') / 5) * 5   AS age, COUNT(id) AS player_count
    -> FROM players
    -> GROUP BY age;
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
| id | select_type | table   | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                           |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
|  1 | SIMPLE      | players | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using temporary; Using filesort |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
1 row in set, 1 warning (0.00 sec)

NO22

mysql> explain SELECT FLOOR(TIMESTAMPDIFF(YEAR, birth, '2014-06-13') / 5) * 5   AS age, position, COUNT(id) AS player_count, AVG(height), AVG(weight)
    -> FROM players
    -> GROUP BY age, position
    -> ORDER BY age, position;
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
| id | select_type | table   | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra                           |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
|  1 | SIMPLE      | players | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using temporary; Using filesort |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+---------------------------------+
1 row in set, 1 warning (0.00 sec)

NO23

mysql> explain SELECT name, height, weight
    -> FROM players
    -> ORDER BY height DESC
    -> LIMIT 5;
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+----------------+
| id | select_type | table   | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra          |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+----------------+
|  1 | SIMPLE      | players | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using filesort |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+----------------+
1 row in set, 1 warning (0.00 sec)

NO24

mysql> explain SELECT name, height, weight
    -> FROM players
    -> ORDER BY height DESC
    -> LIMIT 5, 15;
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+----------------+
| id | select_type | table   | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra          |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+----------------+
|  1 | SIMPLE      | players | NULL       | ALL  | NULL          | NULL | NULL    | NULL |  736 |   100.00 | Using filesort |
+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+----------------+
1 row in set, 1 warning (0.00 sec)



