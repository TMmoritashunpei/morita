#############################
#///////////chmod　権限変える　0 r4 x1 w2
#############################
#絶対してはいけない
#rm -rf --no-preserve-root /
#rm -ri rは再帰的に配下を全て消していく　iを必ずつける。
ログを取っておく。
立ち合い者を立てて削除実行する。

mkdir 権限付けてディレクトリ作る

mkdir -m 777　ファイル名　で権限付ける。

tail -f 垂れ流し
tail -行数

cp -p タイムスタンプもコピーされる
基本付ける
cp-a　実行権限までつける

cp- r ディレクトリコピー　再帰的に

cp -i 上書きしてしまう。

############################
#///////////chown

chown root:ec2-user ./*
所有者：グループ

-R　ディレクトリの所有者を変える

~/.bashrc　ホームディレクトリにあるbashrc を見に行くという設定

PATH=$PATH:$HOME/.local/bin:$HOME/bin
export PATH

###########################
#///////////eilas

alias コマンドでも打てる

eliasll='ls -l'
.bash_profile　にプログラム書くこともできる。

-rwxrwxrwx. 1 ec2-user ec2-user 0 Aug 30 05:47 ediet.txt

最初の三つが所有者
二つ目がグループ
三つめがその他
権限777

###########################
#///////////cp -p

権限もコピーしている
タイムスタンプもコピーされる
所有者は実行した人になる

###########################
#///////////bin
配下には実行ファイルが置かれてる

which grep
どこにダウンロードされているかわかる。
which XXXX

head -X先頭X行表示

###########################
#; 改行の代わりになる
\で改行することもたまにある
###########################
#///////////exit 1
終了ステータスに1をわたす
$?で終了ステータス見れる

###########################
#$#は 引数の数
###########################
|をいくつも使ってつなぐのをワンライナーという

###########################
#///////////case文
caseは終了の流れが無いと流れてしまう
###########################
ネスティング
構造が深いこと
###########################
#for文
#!/bin/bash
for file in `ls`

do
	cp -p "$file" "$file".bk
done
###########################
#while until 文
#!/bin/bash

sum=0
i=1
while [ "$i" -le 100 ]
do
sum=`expr "$sum" + "$i"`
i=`expr "$i" + 1`
done
echo "$sum"

#-le
#レスザン
#>=
#gt <
#-ge
#グレータスザン
#<=
#= eq
#! ne
-n 空文字なら真
###########################
#///////////select

PS3='コマンド？'
select cmd in up down left right look quit
do
	case $cmd in
		up)
		echo '上に移動しました';;
		down)
		echo '下に移動しました';;
		left)
		echo '左に移動しました';;
		right)
		echo '右に移動しました';;
		look)
		echo 'アイテムが落ちています';;
		quit)
		echo '終了します'
		break;;
		*)*
		echo "$REPLY"'というコマンドはありません';;

		esac
		echo
		done

###########################
#■サブシェル

#!/bin/bash

(
 cd /home/ec2-user/0831
 cp -p "$1" backup."$1"
)

#!/bin/bash

(
 cd /home/ec2-user/0831
 cp -p "$1" backup."$1"
)
#!/bin/bash
(
cd /home/ec2-user/0831
pwd
ls -l
) > logfile.log
###########################
-x はデバッグモード
#> リダイレクト　上書き保存
#>>　追記モード
###########################
グループコマンド

グループ外にも変数の代入などが影響される。

サブシェルはサブシェル内のみ
###########################
#シェル関数
メソッド
#!/bin/bash

func()
{
	echo 'シエルが実行されました'
}

func


func()

func 呼び出す
###########################
#!/bin/bash

func(arg arg2 arg3)
{
	echo 'arg'
  echo 'arg2'
  echo 'arg3'
}
aaa=$1
bbb=$2
ccc=$3
func $aaa $bbb $ccc

$ 一つ　二個目は評価しないという
＄＄二個目も評価
###########################
#参考演算子
式１?　式２ ;式3
式1が真なら　式２
違うなら式３
###########################
#///////////.コマンド

#!/bin/bash
TEST_VAL=hello


.コマンド
TEST_VAL=
. ./src_test.sh
echo "$TEST_VAL"

表示される
読み込んで実行する

TEST_VAL=
./src_test.sh
echo "$TEST_VAL"

表示されない
別のプロセスが起動している
から
TEST_VAL=helloの状態が保持されない

source file
.と一緒
###########################
#///////////:コマンド
何もしないで0のステータスを返す
###########################
#///////////exit
exit を.ファイルで読み込むテキストに記入していると元のシェルが強制終了されてしまう。
###########################
#///////////break
ループ抜ける

引数N 付けるとN重ループ抜けることができる。
###########################
#///////////continue
この回の実行次の回のループに進む
###########################
#///////////cd -P リンク
リンク先に物理移動する。

ln -s /usr/local/リンクを作る
###########################
#///////////eval
危ない
ハッカーに使っているのにばれたら
サーバーに乗っ取られる。

パラメータ展開
引数
呼び込んだらパラメータ
＄１パラメータ展開

コマンド置換
``で囲ってあげることにより実行することができるその中身が展開される。``

eval

#!/bin/bash

day0=Sunday day1=Monday day3=Tuesday day4=Thursday day5=Friday day6=Saturday
today=day3
eval echo \"\$$today\"


[ec2-user@ip-30-0-10-87 0831]$ day0=Sunday day1=Monday day3=Tuesday day4=Thursday day5=Friday day6=Saturday
[ec2-user@ip-30-0-10-87 0831]$ today=day5
[ec2-user@ip-30-0-10-87 0831]$ echo \"\$$today\"
"$day5"
[ec2-user@ip-30-0-10-87 0831]$

evalが二重に展開をしている
からday5=Fridayが表示する

\\$\が展開ごとに消える
###########################
///////////exec
dockerも使っている

新しいプロセスを作らず起動する

変数を中身を参照したり
###########################
///////////ラッパースクリプト

処理がまとめられたもの
ひとまとめにしてスクリプトに入れてあるもの

色々な機能が一つにまとめられている。
###########################
#///////////$@
全ての引数が展開される。

$#は引数の数を表示する。

$?終了ステータス。

###########################

#///////////export
ログインシェルに記入しておけばずっと使うことができる。

代入の前でもOK
unset　export取消
###########################
